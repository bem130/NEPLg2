# plan.md
plan.mdに作りたいものの説明が載っているので必ず確認してください  
人が書き換えるので変更しないでください  
変更が必要だと考える場合はnote.mdに記述してください  
# note.md
note.mdは自由に書き換えて構いません  
現在の実装状況、plan.mdと実装との差異などについてかならず記述し、更新してください  

# doc
doc/に適宜ドキュメントを作成してください  
これは自由に書き換えて構いません  
docは全体として一貫性のある書き方となるようにしてください  

# 開発方法
常にPlanを作成して計画的に進めること  
変更内容に関するコメントは付けないこと 「ここから変更」などのコメントは禁止 変更場所を説明するときはソースコードの外で、「○○を○○に変更しました」とテキストで説明すること  
コメント内容はコードのより抽象的な説明を行うこと 処理の流れや処理の目的が分かるように書くこと ドキュメントコメントを活用すること ある処理を変更した時には、それに伴って変更するべきコメントがないかよく確認すること  
不必要な変更を加えないこと エラーログなどがない限り適切に動作しているのだから、変更が必要な部分以外に変更を加えないこと 勝手に既存の機能を削除しないこと 改行やインデントを含むコーディングスタイルなども勝手に変えないこと  
実装を変更したとき、README.mdや/docを更新する必要がないか良く確認し、必要があれば更新すること  
エッジケースを想定しながら適切なテストを書くこと  
大きくなってきたファイルは適宜適切な形に分割すること  
ファイル名やファイル分割、クラス名や関数名など、適宜リファクタリングを行うこと  

# git commit
AGENTとして開発しているとき、git commitは適宜行ってください  
commitする前に、テストの通過を確認しなさい  

# テスト
cargo test と cargo run -p nepl-cli -- test を確認すること

## NEPL stdlib

stdlib/std/ に stdlib 各ファイルがあります

### コメントの付け方
NEPL stdlib には日本語でコメントを付けます
stdlib/nmでサポートする拡張markdownの形式で書きます
ファイルの先頭に、これは何に関する機能を集めたライブラリなのかを書きます
各関数の手前に、これは何をする関数で、どのようなアルゴリズムで実装されているかの説明を書きます
使用する上での注意点、計算量や制約や重要な仕様など、も丁寧に記述します

(例)
```neplg2
//: unwrap_err: Err の[中身/なかみ]を[取/と]り[出/だ]す（[不一致/ふいっち]なら[到達/とうたつ][不能/ふのう]）
//:
//: [目的/もくてき]:
//: - r が Err(e) なら e を[返/かえ]します。
//:
//: [実装/じっそう](アルゴリズム):
//: - match で Ok/Err を[分岐/ぶんき]し、
//:   - Err: [中身/なかみ] e をそのまま[返/かえ]す
//:   - Ok : unreachable を[呼/よ]ぶ
//:
//: [注意/ちゅうい]([重要/じゅうよう]):
//: - r が Ok の[可能性/かのうせい]がある[場面/ばめん]で[呼/よ]ぶと[終了/しゅうりょう]します（[安全/あんぜん]ではありません）。
//: - [事前/じぜん]に is_err で[確認/かくにん]するか、[必要/ひつよう]なら map_err などで[処理/しょり]してください。
//:
//: [計算量/けいさんりょう]:
//: - O(1)
fn unwrap_err <.T, .E> <(Result<.T, .E>)->.E> (r):
    match r:
        Result::Ok v:
            #intrinsic "unreachable" <> ()
        Result::Err e:
            e
```

## NEPLg2 Compiler

/stdlib/neplg2/につくるセルフホストのコンパイラです
CLIはWASIです
CoreはWASI無しのただのWASMにします

/nepl-cli/src/main.rsではstdを使っているけど、/nepl-core/*.rsではno_stdなのと同じような感じでいきます

### コメントの付け方

NEPLg2 Compiler には日本語でコメントを付けます